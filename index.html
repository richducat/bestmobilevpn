<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Best Mobile VPN Finder</title>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; base-uri 'self'; connect-src 'self'; font-src 'self' https://fonts.gstatic.com; frame-ancestors 'none'; img-src 'self' data: https:; script-src 'self' 'nonce-site-lock'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; form-action 'self'; upgrade-insecure-requests">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script nonce="site-lock">
    if (location.protocol === 'http:' && location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
      location.replace(`https://${location.host}${location.pathname}${location.search}${location.hash}`);
    }
  </script>
  <style>
    :root {
      --ink: #0e1116;
      --muted: #545b67;
      --panel: #f6f7fb;
      --accent: #e31837;
      --accent-2: #0f8bff;
      --border: #e5e7eb;
      --radius: 18px;
      --shadow: 0 18px 40px rgba(0,0,0,0.08);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #ffffff;
      color: var(--ink);
      -webkit-font-smoothing: antialiased;
    }
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(12px);
      background: rgba(255,255,255,0.9);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 26px;
    }
    header .brand {
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    header nav a {
      color: var(--muted);
      text-decoration: none;
      margin-left: 18px;
      font-weight: 600;
      transition: color .2s ease;
    }
    header nav a:hover { color: var(--ink); }

    .shell { max-width: 1100px; margin: 0 auto; padding: 0 20px; }

    .hero {
      padding: 90px 24px 80px;
      background: linear-gradient(135deg, #f7f8fb 0%, #ffffff 55%, #f3f4f6 100%);
      text-align: center;
    }
    .hero h1 {
      font-size: clamp(34px, 5vw, 52px);
      letter-spacing: -0.04em;
      margin: 0 0 14px;
    }
    .hero p { color: var(--muted); margin: 0 0 24px; font-size: 18px; }
    .cta-row { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 22px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 700;
      letter-spacing: 0.01em;
      box-shadow: var(--shadow);
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn-primary { background: #0b0c10; color: #fff; }
    .btn-secondary { background: #0f8bff; color: #fff; }
    .btn:hover { transform: translateY(-2px); box-shadow: 0 22px 46px rgba(0,0,0,0.1); }

    .trust-bar { margin-top: 18px; color: var(--muted); font-size: 14px; }

    section { padding: 70px 0; }
    .section-heading { font-size: 28px; margin: 0 0 14px; letter-spacing: -0.02em; }
    .section-sub { color: var(--muted); max-width: 740px; }
    .panel { background: #fff; border: 1px solid var(--border); border-radius: 18px; padding: 22px; box-shadow: var(--shadow); }

    .pill-row { display: flex; flex-wrap: wrap; gap: 10px; }
    .pill {
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fdfdfd;
      cursor: pointer;
      transition: all .15s ease;
      min-width: 180px;
      text-align: left;
    }
    .pill strong { display: block; margin-bottom: 4px; }
    .pill small { color: var(--muted); }
    .pill.active { border-color: #0b0c10; background: #fff; box-shadow: 0 12px 30px rgba(0,0,0,0.08); }

    .quiz-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 18px; align-items: start; }
    .step-label { color: var(--muted); font-weight: 700; letter-spacing: 0.08em; font-size: 12px; text-transform: uppercase; }
    .question { font-size: 22px; margin: 6px 0 14px; letter-spacing: -0.01em; }
    .multi { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 12px; }
    .checkbox {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      background: #fafafa;
      cursor: pointer;
      display: flex;
      gap: 10px;
      align-items: flex-start;
      transition: all .15s ease;
    }
    .checkbox input { margin-top: 4px; }
    .checkbox strong { display: block; }
    .checkbox small { color: var(--muted); }
    .checkbox.active { border-color: #0b0c10; background: #fff; box-shadow: 0 12px 30px rgba(0,0,0,0.08); }

    .progress { height: 8px; background: #eef1f5; border-radius: 999px; overflow: hidden; margin: 16px 0; }
    .progress span { display: block; height: 8px; background: linear-gradient(90deg, #0f8bff, #0b0c10); width: 0%; transition: width .3s ease; }
    .nav-row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    .btn-ghost { padding: 12px 14px; border-radius: 12px; border: 1px solid var(--border); background: #fff; color: var(--ink); font-weight: 700; text-decoration: none; cursor: pointer; }

    .result-card { background: linear-gradient(135deg, #0b0c10, #1b1e25); color: #fff; border-radius: 18px; padding: 22px; box-shadow: var(--shadow); }
    .result-card h3 { margin: 0 0 6px; font-size: 24px; }
    .result-card p { color: rgba(255,255,255,0.78); }
    .result-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 16px; align-items: start; }
    .bullet { display: flex; gap: 10px; margin: 8px 0; }
    .bullet strong { color: #fff; }
    .tag { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; background: rgba(255,255,255,0.08); border-radius: 999px; font-size: 13px; }
    .cta-stack { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    .cta-dark { background: #fff; color: #0b0c10; padding: 12px 16px; border-radius: 12px; font-weight: 800; text-decoration: none; }
    .cta-outline { border: 1px solid rgba(255,255,255,0.4); color: #fff; padding: 12px 16px; border-radius: 12px; text-decoration: none; font-weight: 700; }

    .comparison { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 14px; }
    .card { border: 1px solid var(--border); border-radius: 16px; padding: 18px; background: #fff; box-shadow: var(--shadow); }
    .card h4 { margin: 0 0 6px; }
    .card p { color: var(--muted); }
    .card .btn { width: 100%; box-shadow: none; }

    .security-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 14px; }
    .security-card { border: 1px solid var(--border); border-radius: 16px; padding: 18px; background: #fff; box-shadow: var(--shadow); height: 100%; }
    .security-card h4 { margin: 0 0 8px; display: flex; align-items: center; gap: 10px; }
    .pill-badge { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; background: #eef2ff; color: #2c399b; border-radius: 999px; font-weight: 700; font-size: 13px; margin-bottom: 10px; }
    .fine-print { color: var(--muted); font-size: 13px; line-height: 1.6; }

    footer { text-align: center; padding: 40px 14px 70px; color: var(--muted); font-size: 13px; line-height: 1.6; }

    @media (max-width: 900px) {
      .quiz-grid, .result-grid { grid-template-columns: 1fr; }
      header { position: static; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">BestMobileVPN.net</div>
    <nav>
      <a href="#quiz">Quiz</a>
      <a href="#top-picks">Top Picks</a>
      <a href="#why">Why a VPN</a>
    </nav>
  </header>

  <section class="hero">
    <h1>Find the Best Mobile VPN for <em>You</em> in 45 Seconds</h1>
    <p>Compare the top iPhone &amp; Android VPN apps, unlock exclusive discounts (up to <strong>63% off + 3 months free</strong>), and protect your phone on any Wi‚ÄëFi with a VPN that actually fits your life.</p>
    <div class="cta-row">
      <a class="btn btn-primary" href="#quiz">Start 45‚ÄëSecond VPN Finder</a>
      <a class="btn btn-secondary" href="#top-picks">See Today‚Äôs Top Mobile VPN Deals</a>
    </div>
    <div class="trust-bar">Real testing ‚Ä¢ No ‚Äúrandom listicles‚Äù ‚Ä¢ We may earn a commission if you buy through our links ‚Äî at <strong>no extra cost</strong> to you.</div>
  </section>

  <section>
    <div class="shell">
      <div class="pill-badge">üîí Security-first promise</div>
      <h2 class="section-heading">Built to keep your browsing private and this site safe to use.</h2>
      <p class="section-sub">We obsess over mobile security, and that includes the way this site handles your data. Here‚Äôs what we do so you can explore VPN options with confidence.</p>
      <div class="security-grid" style="margin-top:18px;">
        <div class="security-card">
          <h4>üõ°Ô∏è Encrypted by default</h4>
          <p class="section-sub">Every page, quiz step, and outbound link is served over HTTPS to prevent tampering or snooping while you browse.</p>
        </div>
        <div class="security-card">
          <h4>üôà Your answers stay on your device</h4>
          <p class="section-sub">The quiz runs entirely in your browser. We don‚Äôt store, log, or transmit your selections‚Äîyour picks never leave your phone.</p>
        </div>
        <div class="security-card">
          <h4>üîó Safe outbound links</h4>
          <p class="section-sub">Affiliate links open in new tabs with <code>rel="noopener"</code> to prevent tab‚Äënabbing and ensure you land on the official offer pages.</p>
        </div>
        <div class="security-card">
          <h4>‚úÖ Tested recommendations</h4>
          <p class="section-sub">We evaluate VPNs for encryption strength, leak protection, and kill switches, then highlight the safest picks for mobile.</p>
        </div>
      </div>
      <p class="fine-print" style="margin-top:12px;">Want to double‚Äëcheck? Look for the lock icon in your address bar (<code>https://</code>) and feel free to clear quiz answers by refreshing the page.</p>
    </div>
  </section>

  <section>
    <div class="shell">
      <p class="step-label">Why BestVPNMobile.net?</p>
      <h2 class="section-heading">We test real VPN apps on real phones.</h2>
      <p class="section-sub">There are <strong>hundreds</strong> of VPN apps in the app stores ‚Äì and most of them are slow, shady, or flat‚Äëout dangerous. We install, speed‚Äëtest, and use each app on both iPhone and Android, then rank them on performance, privacy, unblocking, and value.</p>
      <blockquote style="background:#f9fafb;border-radius:14px;padding:14px 16px;border:1px solid var(--border);margin:14px 0;"> <strong>‚ÄúTest real mobile VPNs on real phones and show you only the ones we‚Äôd trust with our own data.‚Äù</strong> </blockquote>
      <ul style="color: var(--muted); line-height:1.7;">
        <li>üì± <strong>Mobile performance:</strong> speed, stability, battery use</li>
        <li>üîí <strong>Security &amp; privacy:</strong> encryption, no‚Äëlogs policies, kill switch, leaks</li>
        <li>üåç <strong>Unblocking power:</strong> streaming, traveling, bypassing restrictions</li>
        <li>üí∞ <strong>Value for money:</strong> long‚Äëterm pricing &amp; current deals</li>
      </ul>
      <a class="btn btn-primary" style="margin-top:12px;" href="#quiz">Skip the Nerd Talk ‚Äì Show Me the Best VPN Right Now</a>
    </div>
  </section>

  <section id="quiz" style="background: #f6f7fb;">
    <div class="shell quiz-grid">
      <div>
        <div class="panel" id="quiz-card">
          <p class="step-label">Not Sure Which VPN to Pick? Let‚Äôs Match You in 45 Seconds.</p>
          <h3 class="question">Answer a few quick questions and we‚Äôll match you with the best mobile VPN for your device, budget, and goals ‚Äì plus the best current deal.</h3>
          <div class="progress"><span id="progress-bar"></span></div>
          <div id="step-content"></div>
          <div class="nav-row">
            <button class="btn-ghost" id="prev-btn" disabled>Back</button>
            <button class="btn btn-secondary" id="next-btn">Start My VPN Match</button>
          </div>
        </div>
      </div>
      <div>
        <div class="result-card" id="result-card">
          <div class="tag" id="persona-tag">Best Overall Mobile VPN</div>
          <h3 id="result-heading">Your Best Match: NordVPN ‚Äì Best All‚ÄëRound Mobile VPN</h3>
          <p id="result-copy">Based on your answers, NordVPN hits the sweet spot for speed, security, and mobile ease‚Äëof‚Äëuse. It‚Äôs the VPN we recommend to most people who want a fast, set‚Äëand‚Äëforget app that just works on both iPhone and Android.</p>
          <div id="result-bullets"></div>
          <div class="cta-stack">
            <a class="cta-dark" id="result-cta" href="https://go.nordvpn.net/aff_c?offer_id=15&aff_id=YOUR_AFF_ID" target="_blank" rel="noopener noreferrer">Get NordVPN Deal ‚Äì Activate My Discount</a>
            <a class="cta-outline" href="#top-picks">Compare with Other Top Mobile VPNs</a>
          </div>
          <p style="color: rgba(255,255,255,0.7); font-size: 13px; margin-top:10px;">You‚Äôll be taken to the official site. Discount is applied automatically.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="top-picks">
    <div class="shell">
      <h2 class="section-heading">Our Top Mobile VPN Picks (All Fully Tested)</h2>
      <p class="section-sub">Short on time? Here are the VPNs we actually recommend for mobile ‚Äì no fluff, just apps that scored high in our tests.</p>
      <div class="comparison" style="margin-top:18px;">
        <div class="card">
          <h4>Editor‚Äôs Choice: NordVPN</h4>
          <p>Best for: <strong>Most iPhone &amp; Android users</strong></p>
          <p>Fast, secure, easy to use, with a great mix of price &amp; features.</p>
          <a class="btn btn-secondary" href="https://go.nordvpn.net/aff_c?offer_id=15&aff_id=YOUR_AFF_ID" target="_blank" rel="noopener noreferrer">Get NordVPN ‚Äì Up to 63% Off + 3 Months Free</a>
        </div>
        <div class="card">
          <h4>Best Value: Surfshark</h4>
          <p>Best for: <strong>Families &amp; device hoarders</strong></p>
          <p>Unlimited devices on one plan, great price, strong apps.</p>
          <a class="btn btn-secondary" href="https://get.surfshark.net/aff_c?offer_id=123&aff_id=YOUR_AFF_ID" target="_blank" rel="noopener noreferrer">See Surfshark Discount</a>
        </div>
        <div class="card">
          <h4>Best for Streaming: ExpressVPN</h4>
          <p>Best for: <strong>Streaming &amp; travel</strong></p>
          <p>Very consistent streaming unblock, fast global network, super simple apps.</p>
          <a class="btn btn-secondary" href="https://www.xvinlink.com/?a_fid=YOUR_AFF_ID" target="_blank" rel="noopener noreferrer">Get ExpressVPN for Streaming</a>
        </div>
        <div class="card">
          <h4>Best Free Option: Proton VPN</h4>
          <p>Best for: <strong>Budget / privacy‚Äëfirst users</strong></p>
          <p>Legit free tier, strong privacy, upgrade path if needed.</p>
          <a class="btn btn-secondary" href="https://go.getproton.me/aff_c?offer_id=YOUR_AFF_ID" target="_blank" rel="noopener noreferrer">Start with Proton VPN Free</a>
        </div>
      </div>
    </div>
  </section>

  <section id="why" style="background:#f6f7fb;">
    <div class="shell">
      <h2 class="section-heading">Still Deciding? Here‚Äôs Why a Mobile VPN Is a No‚ÄëBrainer</h2>
      <div class="panel" style="margin-top:16px; line-height:1.7; color: var(--muted);">
        <p><strong>Your phone is your life.</strong> Banking, email, social, dating, work apps ‚Äì it all runs through your phone. If someone gets into that traffic on public Wi‚ÄëFi, they see everything.</p>
        <p><strong>Public Wi‚ÄëFi is a goldmine for attackers.</strong> Airports, hotels, and caf√©s are full of unencrypted networks. Fake hotspots and man‚Äëin‚Äëthe‚Äëmiddle attacks are easy to pull off. A VPN encrypts your connection so what you do on your phone is unreadable to anyone snooping.</p>
        <p><strong>Your ISP and apps build profiles on you.</strong> Without a VPN, your real IP, location, and browsing habits can be logged and monetized. A VPN gives you your digital privacy back.</p>
        <p><strong>You unlock more of the internet.</strong> Traveling? Living abroad? Want shows that only appear in other countries? A mobile VPN lets you virtually hop locations and reclaim a fair internet.</p>
        <a class="btn btn-primary" style="margin-top:12px;" href="#quiz">Take the 45‚ÄëSecond Quiz &amp; Lock In the Right VPN</a>
      </div>
    </div>
  </section>

  <footer>
    <p><strong>Affiliate disclosure:</strong> Some of the links on BestVPNMobile.net are affiliate links. If you click one and buy a VPN, we may earn a commission at no extra cost to you. This helps us pay for testing, tools, and keeping this site ad‚Äëlight. We only recommend VPNs we‚Äôve personally tested on real mobile devices.</p>
    <p>Built for simplicity. Choose confidently.</p>
  </footer>

  <script nonce="site-lock">
    const steps = [
      {
        key: 'devices',
        question: 'What do you want to protect?',
        type: 'options',
        options: [
          { value: 'iphone', label: 'My iPhone only', note: 'I mainly use an iPhone / iPad.' },
          { value: 'android', label: 'My Android phone only', note: 'I‚Äôm on Android (Samsung, Google, etc.).' },
          { value: 'both', label: 'Both iPhone & Android', note: 'I want one VPN that covers multiple phones.' },
          { value: 'all', label: 'All my devices (phone, laptop, tablet, TV)', note: 'I‚Äôd love an ‚Äúall‚Äëin‚Äëone‚Äù solution.' }
        ]
      },
      {
        key: 'reason',
        question: 'What‚Äôs the main reason you‚Äôre getting a VPN?',
        type: 'options',
        options: [
          { value: 'wifi', label: 'Stay safe on public Wi‚ÄëFi', note: 'Caf√©s, hotels, airports ‚Äì I don‚Äôt want hackers sniffing my data.' },
          { value: 'streaming', label: 'Streaming & entertainment', note: 'Netflix, sports, and shows from other countries.' },
          { value: 'crypto', label: 'Crypto / banking & online finance', note: 'I log in to exchanges, wallets, or banking on my phone.' },
          { value: 'privacy', label: 'Privacy & anonymity', note: 'I don‚Äôt want my ISP, apps, or websites tracking me.' },
          { value: 'torrenting', label: 'Torrenting / P2P', note: 'I sometimes download via torrents and want to stay private.' },
          { value: 'overall', label: 'I just want the best overall mobile VPN', note: 'I want a strong all‚Äërounder and don‚Äôt want to overthink it.' }
        ]
      },
      {
        key: 'budget',
        question: 'What‚Äôs your budget like?',
        type: 'options',
        options: [
          { value: 'premium', label: 'I want the best, even if it costs a bit more', note: 'Premium speed & security first.' },
          { value: 'balanced', label: 'I want the best balance of price & quality', note: 'Solid features, smart pricing.' },
          { value: 'cheap', label: 'I want the cheapest long‚Äëterm deal', note: 'I‚Äôm happy to commit to a long plan for a low monthly cost.' },
          { value: 'free', label: 'I‚Äôm looking for a trusted free or ‚Äústart free‚Äù option', note: 'I‚Äôll upgrade later if I need more.' }
        ]
      },
      {
        key: 'experience',
        question: 'How ‚Äútechy‚Äù are you with this stuff?',
        type: 'options',
        options: [
          { value: 'simple', label: 'Keep it super simple', note: 'I want a clean app and a big ON/OFF button.' },
          { value: 'comfortable', label: 'Comfortable with a few options', note: 'I can handle choosing a server, protocol, etc.' },
          { value: 'power', label: 'Power user / privacy nerd', note: 'I love advanced settings and extra privacy tools.' }
        ]
      },
      {
        key: 'features',
        question: 'Any must‚Äëhave features? (Choose all that apply)',
        type: 'checkboxes',
        options: [
          { value: 'iphone', label: 'Works great on iPhone' },
          { value: 'android', label: 'Works great on Android' },
          { value: 'speed', label: 'Fastest speeds possible (streaming / gaming)' },
          { value: 'unlimited', label: 'Unlimited devices on one plan' },
          { value: 'privacy', label: 'Strongest privacy / audited no‚Äëlogs' },
          { value: 'streaming', label: 'Best for streaming Netflix & sports' },
          { value: 'crypto-pay', label: 'Accepts crypto payments' },
          { value: 'extras', label: 'Extra tools (ad‚Äëblocker, malware filter, etc.)' }
        ]
      }
    ];

    const resultTemplates = {
      crypto: (primary, secondary) => ({
        tag: 'Crypto Trader Result',
        heading: `Your Best Match: ${primary.name} ‚Äì Trade Crypto Safely`,
        copy: `Based on your answers, ${primary.name} keeps your exchange logins and API keys safer on public Wi‚ÄëFi while delivering the speed you need for real‚Äëtime trades.`,
        bullets: [
          'Serious privacy with strong encryption and a strict no‚Äëlogs stance.',
          'Fast enough for order books, price feeds, and mobile trading.',
          'Geo‚Äëblock friendly so you can access exchanges while traveling.',
          'Kill switch protection so your real IP never leaks mid‚Äëtrade.',
          primary.deal
        ],
        cta: primary.cta,
        link: primary.link,
        secondary: secondary
      }),
      travel: (primary, secondary) => ({
        tag: 'Travel / Public Wi‚ÄëFi Result',
        heading: `Your Best Match: ${primary.name} ‚Äì Travel & Public Wi‚ÄëFi`,
        copy: `${primary.name} makes it easy to stay secure on airport, hotel, and caf√© Wi‚ÄëFi while keeping your streaming services available abroad.`,
        bullets: [
          'Reliable on sketchy networks with automatic protection.',
          'Great for streaming your home content while you travel.',
          'Fast nearby servers for smooth video calls and browsing.',
          'Beginner‚Äëfriendly apps so you can tap connect and go.',
          primary.deal
        ],
        cta: primary.cta,
        link: primary.link,
        secondary: secondary
      }),
      iphone: (primary, secondary) => ({
        tag: 'iPhone‚ÄëOnly Result',
        heading: `Your Best Match: ${primary.name} ‚Äì Best for iPhone`,
        copy: `${primary.name} delivers a clean, fast iOS experience so your iPhone stays private on public Wi‚ÄëFi and streaming stays smooth.`,
        bullets: [
          'Polished iOS app with one‚Äëtap connect.',
          'Fast speeds for FaceTime, streaming, and daily browsing.',
          'Strong privacy with modern encryption and no‚Äëlogs approach.',
          'Works great when traveling to keep banking and apps consistent.',
          primary.deal
        ],
        cta: primary.cta,
        link: primary.link,
        secondary: secondary
      }),
      generic: (primary, secondary) => ({
        tag: 'Best Overall Mobile VPN',
        heading: `Your Best Match: ${primary.name} ‚Äì Best All‚ÄëRound Mobile VPN`,
        copy: `${primary.name} hits the sweet spot for speed, security, and mobile ease‚Äëof‚Äëuse. It‚Äôs our go‚Äëto pick for most people who want a fast, set‚Äëand‚Äëforget app.`,
        bullets: [
          'Fast on both Wi‚ÄëFi and 5G for streaming and gaming.',
          'Serious privacy with leak protection and kill switch.',
          'Huge server network to beat geo‚Äëblocks and unlock content.',
          'Mobile‚Äëfirst design with auto‚Äëconnect on unsafe Wi‚ÄëFi.',
          primary.deal
        ],
        cta: primary.cta,
        link: primary.link,
        secondary: secondary
      })
    };

    const brands = {
      nord: {
        name: 'NordVPN',
        link: 'https://go.nordvpn.net/aff_c?offer_id=15&aff_id=YOUR_AFF_ID',
        deal: 'Current deal: Up to 63% off + 3 extra months free on longer plans.',
        cta: 'Get NordVPN Deal ‚Äì Activate My Discount'
      },
      surfshark: {
        name: 'Surfshark',
        link: 'https://get.surfshark.net/aff_c?offer_id=123&aff_id=YOUR_AFF_ID',
        deal: 'Aggressive long‚Äëterm pricing with unlimited devices.',
        cta: 'Activate Surfshark Low‚ÄëCost Plan'
      },
      express: {
        name: 'ExpressVPN',
        link: 'https://www.xvinlink.com/?a_fid=YOUR_AFF_ID',
        deal: 'Travel‚Äëready speeds and consistent streaming access.',
        cta: 'Unlock Streaming with ExpressVPN'
      },
      proton: {
        name: 'Proton VPN',
        link: 'https://go.getproton.me/aff_c?offer_id=YOUR_AFF_ID',
        deal: 'Free plan available plus privacy‚Äëfirst paid tiers.',
        cta: 'Try Proton VPN Free'
      }
    };

    const state = {
      step: 0,
      devices: null,
      reason: null,
      budget: null,
      experience: null,
      features: new Set()
    };

    const stepContent = document.getElementById('step-content');
    const progressBar = document.getElementById('progress-bar');
    const nextBtn = document.getElementById('next-btn');
    const prevBtn = document.getElementById('prev-btn');

    function renderStep() {
      const current = steps[state.step];
      progressBar.style.width = `${((state.step) / steps.length) * 100}%`;
      nextBtn.textContent = state.step === 0 ? 'Start My VPN Match' : (state.step === steps.length - 1 ? 'See My Best VPN Match' : 'Next');
      prevBtn.disabled = state.step === 0;

      if (!current) return;
      let html = `<div class="step-label">Step ${state.step + 1} of ${steps.length}</div><div class="question">${current.question}</div>`;

      if (current.type === 'options') {
        html += '<div class="multi">';
        current.options.forEach(opt => {
          const active = state[current.key] === opt.value ? 'active' : '';
          html += `<div class="pill ${active}" data-value="${opt.value}" data-key="${current.key}"><strong>${opt.label}</strong><small>${opt.note}</small></div>`;
        });
        html += '</div>';
      } else if (current.type === 'checkboxes') {
        html += '<div class="multi">';
        current.options.forEach(opt => {
          const active = state.features.has(opt.value) ? 'active' : '';
          html += `<label class="checkbox ${active}" data-value="${opt.value}"><input type="checkbox" ${active ? 'checked' : ''}/> <div><strong>${opt.label}</strong></div></label>`;
        });
        html += '</div>';
      }
      stepContent.innerHTML = html;
    }

    function handleOptionClick(e) {
      const pill = e.target.closest('.pill');
      if (!pill) return;
      const key = pill.dataset.key;
      state[key] = pill.dataset.value;
      renderStep();
    }

    function handleCheckboxClick(e) {
      const box = e.target.closest('.checkbox');
      if (!box) return;
      const value = box.dataset.value;
      if (state.features.has(value)) state.features.delete(value); else state.features.add(value);
      renderStep();
    }

    function determinePersona() {
      if (state.reason === 'crypto') return 'crypto';
      if (state.reason === 'wifi') return 'travel';
      const iphoneOnly = state.devices === 'iphone';
      if (iphoneOnly && state.reason !== 'crypto' && state.reason !== 'torrenting') return 'iphone';
      return 'generic';
    }

    function pickBrand(persona) {
      const f = state.features;
      const experience = state.experience;
      const budget = state.budget;
      const devices = state.devices;

      if (persona === 'crypto') {
        if (budget === 'cheap') return [brands.surfshark, brands.nord];
        if (f.has('privacy') || f.has('crypto-pay') || experience === 'power') return [brands.proton, brands.nord];
        return [brands.nord, brands.express];
      }

      if (persona === 'travel') {
        if (experience === 'simple' || state.reason === 'streaming') return [brands.express, brands.nord];
        if (budget === 'cheap' || devices === 'all') return [brands.surfshark, brands.nord];
        return [brands.nord, brands.express];
      }

      if (persona === 'iphone') {
        if (budget === 'premium' || experience === 'simple') return [brands.express, brands.nord];
        if (budget === 'cheap') return [brands.surfshark, brands.nord];
        return [brands.nord, brands.surfshark];
      }

      // generic fallback
      if (budget === 'cheap') return [brands.surfshark, brands.nord];
      if (budget === 'free') return [brands.proton, brands.nord];
      return [brands.nord, brands.express];
    }

    function renderResult() {
      const persona = determinePersona();
      const [primary, secondary] = pickBrand(persona);
      const template = resultTemplates[persona] || resultTemplates.generic;
      const result = template(primary, secondary);
      document.getElementById('persona-tag').textContent = result.tag;
      document.getElementById('result-heading').textContent = result.heading;
      document.getElementById('result-copy').textContent = result.copy;
      document.getElementById('result-cta').textContent = result.cta;
      document.getElementById('result-cta').href = result.link;
      document.getElementById('result-bullets').innerHTML = `
        ${result.bullets.map(b => `<div class="bullet">‚Ä¢ <div>${b}</div></div>`).join('')}
        <div class="bullet" style="margin-top:8px;">
          <div style="background:rgba(255,255,255,0.08); padding:10px 12px; border-radius:12px;">
            Prefer another option? <strong>${secondary.name}</strong> is a great backup pick.
          </div>
        </div>
      `;
    }

    nextBtn.addEventListener('click', () => {
      if (state.step === steps.length - 1) {
        renderResult();
        return;
      }
      state.step = Math.min(steps.length - 1, state.step + 1);
      renderStep();
    });

    prevBtn.addEventListener('click', () => {
      state.step = Math.max(0, state.step - 1);
      renderStep();
    });

    stepContent.addEventListener('click', handleOptionClick);
    stepContent.addEventListener('click', handleCheckboxClick);

    renderStep();
    renderResult();
  </script>
</body>
</html>
